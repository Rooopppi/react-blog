(this.webpackJsonpdenys=this.webpackJsonpdenys||[]).push([[0],{233:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(28),i=n.n(o),a=n(7),s=n(37),d=n(31),l=n(95),j=n(94),b=n(4),u="REGISTER_SUCCESS",h="REGISTER_FAIL",m="LOGIN_SUCCESS",x="LOGIN_FAIL",p="GET_USER_SUCCESS",O="LOGOUT",f="SET_MESSAGE",g="CLEAR_MESSAGE",v="DARK_THEME",k="LIGHT_THEME",y=localStorage.getItem("token"),S=JSON.parse(localStorage.getItem("userData"))||{id:"",email:"",name:""},w=S.email,C=S.id,D=S.name,I=y?{id:C,name:D,email:w,isLoggedIn:!0}:{id:null,name:null,email:null,isLoggedIn:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case u:case h:case x:case O:return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:!1});case m:return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:!0});case p:return Object(b.a)(Object(b.a)({},e),{},{id:r._id},r);default:return e}},L={},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case f:return{message:r};case g:return{message:""};default:return e}},P={theme:localStorage.getItem("theme")},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case v:return localStorage.setItem("theme","Dark"),{theme:"Dark"};case k:return localStorage.setItem("theme","Light"),{theme:"Light"};default:return e}},_=Object(d.combineReducers)({auth:E,message:T,theme:R}),A=Object(d.createStore)(_,Object(j.composeWithDevTools)(Object(d.applyMiddleware)(l.a))),q=n(12),N=n(10),z=n(2),U=function(e,t){localStorage.setItem(e,t)},M=n(96),B=n.n(M),F=(n(132),B.a.create({baseURL:"http://51.158.179.21/api/v1"}));F.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t?(e.headers.Authorization="Bearer ".concat(t),e):e}),(function(e){return console.log(e),Promise.reject(e)}));var H=function(e){e?s.b.error(e.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.b.success("Success!",{position:"bottom-right",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0})};F.interceptors.response.use((function(e){return H(),e}),(function(e){return H(e),Promise.reject(e)}));var G,V,J,K=F,X=function(e,t,n){return K.post("/users",{email:e,password:t,name:n})},W=function(){return K.get("/auth/user")},Z=function(e,t){return K.post("/auth",{email:e,password:t})},Q=function(){localStorage.removeItem("token")},Y=function(){return function(e){return W().then((function(t){return U("userData",JSON.stringify({id:t.data._id,name:t.data.name,email:t.data.email})),e({type:p,payload:t.data}),Promise.resolve()}),(function(){return Promise.reject()}))}},$=function(){return function(e){Q(),e({type:O})}},ee=n(3),te=z.c.header(G||(G=Object(ee.a)(["\n  background-color: ",";\n  padding: 10px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n"])),(function(e){return e.theme.header})),ne=z.c.div(V||(V=Object(ee.a)(["\n  margin: 0 10px;\n\n  &:hover {\n    color: gray;\n  }\n"]))),re=z.c.div(J||(J=Object(ee.a)(["\n  display: flex;\n  justify-content: space-around;\n  max-width: 50%;\n"]))),ce=n(0);var oe,ie,ae,se,de,le,je,be=function(){var e=Object(a.c)((function(e){return e.auth})).isLoggedIn,t=Object(a.b)();return Object(ce.jsxs)(te,{children:[Object(ce.jsxs)(re,{children:[Object(ce.jsx)(q.b,{to:"/",children:Object(ce.jsx)(ne,{children:"Home"})}),Object(ce.jsx)(q.b,{to:"/profile",children:Object(ce.jsx)(ne,{children:"Profile"})}),Object(ce.jsx)(q.b,{to:"/users-list",children:Object(ce.jsx)(ne,{children:"Users"})})]}),Object(ce.jsxs)(re,{children:[e?Object(ce.jsx)(ne,{as:"a",href:"/login",onClick:function(){t($())},children:"Logout"}):Object(ce.jsx)(q.b,{to:"/login",children:Object(ce.jsx)(ne,{children:"Login"})}),Object(ce.jsx)(q.b,{to:"/register",children:Object(ce.jsx)(ne,{children:"Register"})})]})]})},ue=n(6),he=n(9),me=n(25),xe=z.c.div(oe||(oe=Object(ee.a)(['\n  background-color: red;\n  font-size: 14px;\n  border-radius: 20px;\n  width: fit-content;\n  padding: 3px 10px;\n  color: #c9d1d9;\n  margin: 9px 0 5px 10px;\n  font-weight: normal;\n\n  &:before {\n    content: "";\n    position: absolute;\n    bottom: 22px;\n    left: 19px;\n    border: 10px solid transparent;\n    border-bottom: 10px solid red;\n  }\n']))),pe=z.c.input(ie||(ie=Object(ee.a)(["\n  padding: 10px;\n  background-color: ",";\n  border: none;\n  border-radius: 20px;\n  width: 100%;\n  color: #c9d1d9;\n  margin-right: ",";\n"])),(function(e){return e.backgroundDark?"#0d1117":"#161b22"}),(function(e){return e.marginRight||"0"})),Oe=["field","form","backgroundDark"],fe=function(e){var t=e.field,n=e.form,r=n.touched,c=n.errors,o=e.backgroundDark,i=Object(me.a)(e,Oe);return Object(ce.jsxs)("div",{children:[Object(ce.jsx)(pe,Object(b.a)(Object(b.a)({backgroundDark:o,type:"text"},t),i)),r[t.name]&&c[t.name]&&Object(ce.jsx)(xe,{children:c[t.name]})]})},ge=z.c.button(ae||(ae=Object(ee.a)(["\n  margin-top: 5px;\n  padding: 5px;\n  background-color: ",";\n  border: none;\n  color: ",";\n  border-radius: 8px;\n  cursor: pointer;\n  width: ",";\n  font-size: ",";\n  height: fit-content;\n\n  &:hover {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(e){return e.styled?"#d1495b":"transparent"}),(function(e){return e.theme.fontColor}),(function(e){return e.width||"100%"}),(function(e){return e.fontSize||"14px"}),(function(e){return e.styled?"rgb(228, 40, 40)":"transparent"}),(function(e){return e.styled?"#c9d1d9":"gray"})),ve=z.c.div(se||(se=Object(ee.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  min-height: 300px;\n  width: 300px;\n  background-color: ",";\n  padding: 20px;\n  border-radius: 10px;\n"])),(function(e){return e.theme.post})),ke=z.c.h1(de||(de=Object(ee.a)(["\n  font-size: 25px;\n  font-weight: bold;\n  margin-top: 10px;\n  margin-bottom: 20px;\n  text-align: ",";\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.styled?"center":"normal"}),(function(e){return e.hover?"gray":"#red"})),ye=z.c.div(le||(le=Object(ee.a)(["\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n"]))),Se=z.c.div(je||(je=Object(ee.a)(["\n  font-size: 25px;\n  font-weight: bold;\n  margin-bottom: 10px;\n  position: relative;\n"]))),we=he.a().shape({email:he.b().email("Invalid email").required("Required"),password:he.b().min(2,"Too Short!").max(30,"Too Long!").required("Required")});var Ce=function(){var e=Object(a.c)((function(e){return e.auth})).isLoggedIn,t=Object(a.b)();return Object(ce.jsx)(ve,{children:Object(ce.jsxs)(ye,{children:[Object(ce.jsx)(ke,{children:"Login"}),Object(ce.jsx)(ue.c,{initialValues:{email:"",password:""},validationSchema:we,onSubmit:function(e){var n,r;t((n=e.email,r=e.password,function(e){return Z(n,r).then((function(t){return U("token",t.data.token),e({type:m,payload:t.data}),Promise.resolve()}),(function(){return e({type:x}),Promise.reject()}))}))},children:function(e){var t=e.errors,n=e.touched;return Object(ce.jsxs)(ue.b,{children:[Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"email",component:fe,placeholder:"Enter email",backgroundDark:"backgroundDark"})}),Object(ce.jsxs)(Se,{children:[Object(ce.jsx)(ue.a,{name:"password",type:"password",placeholder:"Enter password",className:"password"}),t.password&&n.password?Object(ce.jsx)(xe,{children:t.password}):null]}),Object(ce.jsx)(ge,{styled:!0,type:"submit",children:"Login"})]})}}),Object(ce.jsx)("span",{children:"or"}),Object(ce.jsx)(q.b,{to:"/register",children:Object(ce.jsx)(ge,{styled:!0,type:"button",children:"Register"})}),e&&Object(ce.jsx)(N.a,{to:"/profile"})]})})},De=he.a().shape({userName:he.b().min(2,"Too Short!").max(30,"Too Long!").required("Required"),email:he.b().email("Invalid email").required("Required"),password:he.b().min(5,"Too Short!").max(30,"Too Long!").required("Required")});var Ie,Ee,Le,Te,Pe,Re=function(){var e=Object(a.b)(),t=Object(N.g)();return Object(ce.jsx)(ve,{children:Object(ce.jsxs)(ye,{children:[Object(ce.jsx)(ke,{children:"Register"}),Object(ce.jsx)(ue.c,{initialValues:{userName:"",email:"",password:""},validationSchema:De,onSubmit:function(n){var r,c,o;e((r=n.email,c=n.password,o=n.userName,function(e){return X(r,c,o).then((function(){return e({type:u}),Promise.resolve()}),(function(){return e({type:h}),Promise.reject()}))})).then((function(){t.push("/login")}))},children:function(e){var t=e.errors,n=e.touched;return Object(ce.jsxs)(ue.b,{children:[Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"userName",component:fe,placeholder:"Enter username",backgroundDark:"backgroundDark"})}),Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"email",component:fe,placeholder:"Enter email",backgroundDark:"backgroundDark"})}),Object(ce.jsxs)(Se,{children:[Object(ce.jsx)(ue.a,{name:"password",type:"password",placeholder:"Enter password",className:"password"}),t.password&&n.password?Object(ce.jsx)(xe,{children:t.password}):null]}),Object(ce.jsx)(ge,{styled:!0,type:"submit",children:"Register"})]})}}),Object(ce.jsx)("span",{children:"or"}),Object(ce.jsx)(q.b,{to:"/login",children:Object(ce.jsx)(ge,{styled:!0,type:"button",children:"Login"})})]})})},_e=n(5),Ae=n(106),qe=n.n(Ae),Ne=(z.c.h1(Ie||(Ie=Object(ee.a)(["\n  text-align: center;\n  margin-bottom: 10px;\n  &:hover {\n    color: gray;\n    transition-duration: 0.1s;\n  }\n"]))),z.c.div(Ee||(Ee=Object(ee.a)(["\n  font-size: 18px;\n  margin: 10px 0;\n"])))),ze=z.c.div(Le||(Le=Object(ee.a)(["\n  color: gray;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  font-size: 14px;\n"]))),Ue=z.c.div(Te||(Te=Object(ee.a)(["\n  text-align: end;\n"]))),Me=z.c.div(Pe||(Pe=Object(ee.a)(["\n  background-color: ",";\n  margin-bottom: 20px;\n  padding: 15px;\n  border-radius: 20px;\n  p {\n    margin-bottom: 20px;\n  }\n"])),(function(e){return e.theme.post}));var Be,Fe,He=function(e){var t=e._id,n=e.title,r=e.description,c=e.dateCreated,o=e.postedBy,i=e.likes;return Object(ce.jsxs)(Me,{children:[Object(ce.jsxs)("div",{children:[Object(ce.jsx)(q.b,{to:"/posts/".concat(t),children:Object(ce.jsx)(ke,{styled:!0,hover:!0,children:n})}),Object(ce.jsx)(Ne,{children:r})]}),Object(ce.jsxs)(ze,{children:[Object(ce.jsxs)("div",{children:["Posted by ",o||"anon"]}),Object(ce.jsxs)(Ue,{children:["Posted at ",c]})]}),Object(ce.jsxs)("div",{children:["Likes ",i.length]})]})},Ge=z.c.div(Be||(Be=Object(ee.a)(["\n  margin-bottom: 10px;\n  ul {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n  }\n  a {\n    font-size: 18px;\n    margin-right: 10px;\n    border: 1px solid;\n    border-color: ",";\n    padding: 3px 11px;\n    border-radius: 20px;\n    color: ",";\n  }\n  .disabled a,\n  a:hover {\n    border-color: gray;\n    cursor: pointer;\n    color: gray;\n  }\n  .selected a {\n    border-color: #d1495b;\n    color: #d1495b;\n  }\n"])),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fontColor})),Ve=function(e){var t=e.allPosts,n=e.search,c=e.sortKey,o=Object(r.useState)(1),i=Object(_e.a)(o,2),a=i[0],s=i[1],d=Object(r.useState)(5),l=Object(_e.a)(d,1)[0],j=a*l,u=j-l,h=Object(r.useMemo)((function(){return n?t.filter((function(e){return e.title.toLowerCase().includes(n.toLowerCase())})):t.slice(u,j).reverse().sort((function(e,t){return e[c]>t[c]?-1:e[c]<t[c]?1:0}))}),[n,t,u,j,c]),m=Math.ceil(t.length/l);return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)("div",{className:"entry",children:h.map((function(e){return Object(ce.jsx)(He,Object(b.a)({},e),e._id)}))}),Object(ce.jsx)(Ge,{children:Object(ce.jsx)(qe.a,{breakLabel:"...",nextLabel:">",onPageChange:function(e){s(e.selected+1)},pageRangeDisplayed:3,pageCount:m,previousLabel:"<",renderOnZeroPageCount:null})})]})},Je={getAllPosts:function(e,t,n){return K.get("/posts",{params:{postedBy:n,limit:e,skip:t}})},addPost:function(e,t,n){return K.post("/posts",{title:e,description:t,fullText:n})},getSinglePost:function(e){return K.get("/posts/".concat(e))},deletePost:function(e){return K.delete("/posts/".concat(e))},editPost:function(e,t,n,r){return K.patch("/posts/".concat(e),{title:t,description:n,fullText:r})},likePost:function(e){return K.put("/posts/like/".concat(e))},uploadImage:function(e,t){var n=new FormData;return n.append("image",t),K.put("/posts/upload/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}},Ke=z.c.textarea(Fe||(Fe=Object(ee.a)(["\n  background-color: ",';\n  color: #c9d1d9;\n  border: none;\n  width: 100%;\n  padding: 10px;\n  border-radius: 20px;\n  font-family: "Open Sans", sans-serif;\n  min-height: 150px;\n'])),(function(e){return e.backgroundDark?"#0d1117":"#161b22"})),Xe=["field","form","backgroundDark"],We=function(e){var t=e.field,n=e.form,r=n.touched,c=n.errors,o=e.backgroundDark,i=Object(me.a)(e,Xe);return Object(ce.jsxs)("div",{children:[Object(ce.jsx)(Ke,Object(b.a)(Object(b.a)({type:"text",backgroundDark:o},t),i)),r[t.name]&&c[t.name]&&Object(ce.jsx)(xe,{children:c[t.name]})]})},Ze=function(e){return Je.getAllPosts().then((function(e){return e.data.pagination.total})).then((function(t){return Je.getAllPosts(50,e?0:t-50,e).then((function(e){var t;return((null===(t=e.data)||void 0===t?void 0:t.data)||[]).reverse()}))}))},Qe=he.a().shape({title:he.b().min(5,"Too Short!").max(30,"Too Long!").required("Required"),description:he.b().min(5,"Too Short!").max(50,"Too Long!").required("Required"),fullText:he.b().min(30,"Too Short!").max(100,"Too Long!").required("Required")});var Ye,$e,et,tt,nt,rt,ct=function(e){var t=e.postId,n=e.setPostData,r=e.setAllPosts;return Object(ce.jsx)("div",{children:Object(ce.jsxs)("div",{children:[t&&Object(ce.jsx)(ke,{children:"Add your post"}),Object(ce.jsx)(ue.c,{initialValues:{title:"",description:"",fullText:""},validationSchema:Qe,onSubmit:function(c,o){var i=o.resetForm;t?e.method(e.postId,c.title,c.description,c.fullText).then((function(){Je.getSinglePost(t).then((function(e){n(e.data)})),i()})):e.method(c.title,c.description,c.fullText).then((function(){Ze().then(r),i()}))},children:function(){return Object(ce.jsxs)(ue.b,{className:"addPost-form",children:[Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"title",component:fe,placeholder:"Enter title"})}),Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"description",component:fe,placeholder:"Enter description"})}),Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"fullText",placeholder:"Enter text",component:We})}),Object(ce.jsx)(ge,{styled:!0,width:"100px",type:"submit",children:"Submit"})]})}})]})})},ot=z.c.div(Ye||(Ye=Object(ee.a)(["\n  padding: 20px;\n"]))),it=z.c.div($e||($e=Object(ee.a)(["\n  background-color: #d1495b;\n  color: #c9d1d9;\n  text-align: center;\n"]))),at=z.c.div(et||(et=Object(ee.a)(["\n  max-width: 1200px;\n  margin: auto;\n"]))),st=z.c.div(tt||(tt=Object(ee.a)(["\n  margin-bottom: 10px;\n  border-bottom: 1px solid gray;\n  display: flex;\n  justify-content: space-between;\n"]))),dt=z.c.div(nt||(nt=Object(ee.a)(["\n  display: flex;\n  min-width: 200px;\n"]))),lt=z.c.div(rt||(rt=Object(ee.a)(["\n  margin-bottom: 10px;\n  display: flex;\n"])));var jt,bt=function(){var e=Object(r.useState)([]),t=Object(_e.a)(e,2),n=t[0],c=t[1],o=Object(a.c)((function(e){return e.auth})).isLoggedIn,i=Object(a.c)((function(e){return e.auth})).id,s=Object(r.useState)(""),d=Object(_e.a)(s,2),l=d[0],j=d[1],b=Object(r.useState)(""),u=Object(_e.a)(b,2),h=u[0],m=u[1];return Object(r.useEffect)((function(){Ze().then(c)}),[]),Object(ce.jsx)(ot,{children:Object(ce.jsxs)(at,{children:[Object(ce.jsxs)(st,{children:[Object(ce.jsxs)(dt,{children:[Object(ce.jsx)(ge,{backgroundColor:"transparent",type:"button",onClick:function(){Ze().then(c)},fontSize:"20px",backgroundHover:"transparent",colorHover:"gray",children:"All posts"}),o?Object(ce.jsx)(ge,{backgroundColor:"transparent",type:"button",onClick:function(){Ze(i).then(c)},fontSize:"20px",backgroundHover:"transparent",colorHover:"gray",children:"My posts"}):null]}),Object(ce.jsxs)(lt,{children:[Object(ce.jsx)(pe,{type:"text",marginRight:"10px",value:l,placeholder:"Search",onChange:function(e){j(e.target.value)}}),Object(ce.jsxs)("select",{onChange:function(e){m(e.target.value)},children:[Object(ce.jsx)("option",{value:"",hidden:!0,children:"Sort by"}),Object(ce.jsx)("option",{value:"title",children:"title"}),Object(ce.jsx)("option",{value:"dateCreated",children:"date"})]})]})]}),Object(ce.jsx)(Ve,{allPosts:n,search:l,sortKey:h}),o?Object(ce.jsx)(ct,{method:Je.addPost,setAllPosts:c}):Object(ce.jsx)(it,{children:"Please log in to leave a post"})]})})},ut={getAllComments:function(e){return K.get("/comments/post/".concat(e))},addComment:function(e,t,n){return K.post("/comments/post/".concat(e),{text:t,followedCommentID:n})},deleteComment:function(e){return K.delete("/comments/".concat(e))},editComment:function(e,t){return K.patch("/comments/".concat(e),{text:t})},likeComment:function(e){return K.put("/comments/like/".concat(e))}},ht=z.c.div(jt||(jt=Object(ee.a)(["\n  color: ",";\n  font-size: 20px;\n  margin-bottom: 10px;\n"])),(function(e){return e.theme.fontColor})),mt=he.a().shape({text:he.b().min(5,"Too Short!").max(50,"Too Long!").required("Required")});var xt,pt,Ot,ft,gt,vt=function(e){var t=e.postId,n=e.followedCommentID,r=e.setAllComments,c=e.setShowReply,o=e.setShowEdit,i=e.method,a=e.commentId,s=e.backgroundDark;return Object(ce.jsx)("div",{children:Object(ce.jsxs)("div",{children:[!a&&(t===n?Object(ce.jsx)(ht,{children:"Add your comment"}):Object(ce.jsx)(ht,{children:"Reply"})),Object(ce.jsx)(ue.c,{initialValues:{text:""},validationSchema:mt,onSubmit:function(e,s){var d=s.resetForm;a?i(a,e.text).then((function(){ut.getAllComments(t).then((function(e){r(e.data)})),d(),o(!1)})):i(t,e.text,n).then((function(){ut.getAllComments(t).then((function(e){r(e.data)})),d(),c&&c(!1)}))},children:function(){return Object(ce.jsxs)(ue.b,{children:[Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"text",placeholder:"Enter text",component:We,backgroundDark:s})}),Object(ce.jsx)(ge,{type:"submit",styled:!0,width:"fit-content",children:"Submit"}),o&&Object(ce.jsx)(ge,{type:"button",width:"fit-content",onClick:function(){return o(!1)},children:"Edit"})]})}})]})})},kt=z.c.div(xt||(xt=Object(ee.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n"]))),yt=z.c.div(pt||(pt=Object(ee.a)(["\n  img {\n    max-width: 100%;\n    max-height: 500px;\n  }\n"]))),St=z.c.div(Ot||(Ot=Object(ee.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n"]))),wt=z.c.div(ft||(ft=Object(ee.a)(["\n  background-color: ",";\n  margin-bottom: 20px;\n  padding: 15px 15px 8px 15px;\n  border-radius: 20px;\n  .comment-text {\n    margin-bottom: 10px;\n  }\n  .comment-meta {\n    color: gray;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n  }\n  .reply-comment {\n    margin-left: 50px;\n  }\n  .comment-meta {\n    font-size: 14px;\n  }\n  .comment-date {\n    text-align: end;\n  }\n"])),(function(e){return e.theme.comment})),Ct=z.c.div(gt||(gt=Object(ee.a)(["\n  margin-left: 50px;\n"])));var Dt=function e(t){var n=t._id,c=t.text,o=t.dateCreated,i=t.commentedBy,s=t.likes,d=t.allComments,l=t.postId,j=t.setAllComments,u=Object(a.c)((function(e){return e.auth})).id,h=Object(a.c)((function(e){return e.auth})).isLoggedIn,m=Object(r.useState)(null),x=Object(_e.a)(m,2),p=x[0],O=x[1],f=Object(r.useState)(!1),g=Object(_e.a)(f,2),v=g[0],k=g[1],y=Object(r.useState)(!1),S=Object(_e.a)(y,2),w=S[0],C=S[1],D=Object(r.useState)(s.length),I=Object(_e.a)(D,2),E=I[0],L=I[1];Object(r.useEffect)((function(){s.includes(u)?O(!0):O(!1)}),[u,s]);var T=Object(r.useMemo)((function(){return d.filter((function(e){return e.followedCommentID===n}))}),[d,n]);return Object(ce.jsxs)(ce.Fragment,{children:[v?Object(ce.jsx)(vt,{setShowEdit:k,postId:l,method:ut.editComment,commentId:n,setAllComments:j}):Object(ce.jsxs)(wt,{children:[Object(ce.jsx)("div",{className:"comment-entry",children:Object(ce.jsx)("p",{className:"comment-text",children:c})}),Object(ce.jsxs)("div",{className:"comment-meta",children:[Object(ce.jsxs)("div",{className:"comment-author",children:["commented by ",i||"anon"]}),Object(ce.jsxs)("div",{className:"comment-date",children:["commented at ",o]})]}),Object(ce.jsxs)(St,{children:[Object(ce.jsxs)(ge,{styled:!0,width:"fit-content",type:"button",onClick:function(){return h&&(ut.likeComment(n),L(p?E-1:E+1),void O(!p))},children:[p?"Unlike":"Like"," ",E]}),Object(ce.jsxs)(kt,{children:[h&&Object(ce.jsx)(ge,{type:"button",width:"fit-content",onClick:function(){return C(!w)},children:"Reply"}),u===i&&Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(ge,{type:"button",width:"fit-content",onClick:function(){return k(!0)},children:"Edit"}),Object(ce.jsx)(ge,{type:"button",width:"fit-content",onClick:function(){ut.deleteComment(n).then((function(){ut.getAllComments(l).then((function(e){j(e.data)}))}))},children:"Delete"})]})]})]}),w&&Object(ce.jsx)(vt,{followedCommentID:n,postId:l,setAllComments:j,setShowReply:C,method:ut.addComment,backgroundDark:"backgroundDark"})]}),Object(ce.jsx)(Ct,{children:T.map((function(t){return Object(ce.jsx)(e,Object(b.a)(Object(b.a)({allComments:d},t),{},{postId:l,setAllComments:j}),t._id)}))})]})};var It=function(e){var t=Object(r.useState)(null),n=Object(_e.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)([]),s=Object(_e.a)(i,2),d=s[0],l=s[1],j=Object(r.useState)(!1),u=Object(_e.a)(j,2),h=u[0],m=u[1],x=Object(r.useState)(null),p=Object(_e.a)(x,2),O=p[0],f=p[1],g=Object(r.useState)(null),v=Object(_e.a)(g,2),k=v[0],y=v[1],S=Object(N.g)(),w=Object(a.c)((function(e){return e.auth})).id,C=Object(a.c)((function(e){return e.auth})).isLoggedIn,D=Object(r.createRef)(),I=e.match.params.post_id;Object(r.useEffect)((function(){return Je.getSinglePost(I).then((function(e){o(e.data),f(e.data.likes.length),e.data.likes.includes(w)?y(!0):y(!1)})),ut.getAllComments(I).then((function(e){l(e.data)})),I}),[w,I]);var E=Object(r.useMemo)((function(){return d.filter((function(e){return e.followedCommentID===I}))}),[d,I]);return c?Object(ce.jsx)(ot,{children:Object(ce.jsxs)(at,{children:[Object(ce.jsxs)(Me,{children:[Object(ce.jsxs)("div",{children:[Object(ce.jsx)(ke,{styled:!0,children:c.title}),c.image&&Object(ce.jsx)(yt,{children:Object(ce.jsx)("img",{src:"".concat("http://51.158.179.21").concat(c.image),alt:"img"})}),Object(ce.jsx)(Ne,{children:c.description}),Object(ce.jsx)("p",{children:c.fullText})]}),Object(ce.jsxs)(ze,{children:[Object(ce.jsxs)("div",{children:["Posted by ",c.postedBy]}),Object(ce.jsxs)(Ue,{children:["Posted at ",c.dateCreated]})]}),Object(ce.jsxs)(St,{children:[Object(ce.jsxs)(ge,{styled:!0,width:"fit-content",onClick:function(){return C&&(e=c._id,Je.likePost(e),f(k?O-1:O+1),void y(!k));var e},type:"button",children:[k?"Unlike":"Like"," ",O]}),w===c.postedBy&&Object(ce.jsxs)("div",{children:[Object(ce.jsx)(ge,{onClick:function(){return m(!h)},type:"button",width:"fit-content",children:"Edit"}),Object(ce.jsx)(ge,{onClick:function(){return e=c._id,void Je.deletePost(e).then((function(){S.push("/")}));var e},type:"button",width:"fit-content",children:"Delete"})]})]})]}),h&&Object(ce.jsxs)("div",{children:[Object(ce.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Je.uploadImage(c._id,D.current.files[0]).then((function(){Je.getSinglePost(I).then((function(e){o(e.data),f(e.data.likes.length)}))}))},children:[Object(ce.jsx)("input",{type:"file",ref:D}),Object(ce.jsx)(ge,{width:"fit-content",type:"submit",children:"Submit"})]}),Object(ce.jsx)(ct,{postId:c._id,method:Je.editPost,setPostData:o})]}),Object(ce.jsxs)("div",{children:[Object(ce.jsx)(ke,{children:"Comments"}),E.map((function(e){return Object(ce.jsx)(Dt,Object(b.a)(Object(b.a)({allComments:d},e),{},{postId:I,setAllComments:l}),e._id)}))]}),C?Object(ce.jsx)(vt,{followedCommentID:I,postId:I,setAllComments:l,method:ut.addComment}):Object(ce.jsx)(it,{children:"Please log in to leave a post"})]})}):Object(ce.jsx)("div",{children:"Loading... "})},Et=["extraDetails"],Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return K.get("/users",{params:{limit:e,skip:t}})},Tt=function(e){return K.delete("/users/".concat(e))},Pt=function(e,t){t.extraDetails;var n=Object(me.a)(t,Et);return K.patch("/users/".concat(e),Object(b.a)(Object(b.a)({},n),{},{extra_details:t.extraDetails}))},Rt=function(e,t){var n=new FormData;return n.append("avatar",t),K.put("/users/upload/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})},_t=he.a().shape({name:he.b().min(5,"Too Short!").max(30,"Too Long!").required("Required"),details:he.b().min(5,"Too Short!").max(30,"Too Long!").required("Required"),extraDetails:he.b().min(5,"Too Short!").max(30,"Too Long!").required("Required"),profession:he.b().min(5,"Too Short!").max(30,"Too Long!").required("Required"),skills:he.b().min(5,"Too Short!").max(30,"Too Long!").required("Required")});var At,qt,Nt,zt,Ut,Mt=function(){var e=Object(a.c)((function(e){return e.auth})).id,t=Object(a.b)();return Object(ce.jsx)("div",{className:"editProfile-wrapper",children:Object(ce.jsx)("div",{className:"editProfile",children:Object(ce.jsx)(ue.c,{initialValues:{name:"",extraDetails:"",skills:"",profession:"",details:""},validationSchema:_t,onSubmit:function(n,r){var c=r.resetForm;Pt(e,n).then((function(){t(Y()),c()}))},children:function(){return Object(ce.jsxs)(ue.b,{children:[Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"name",component:fe,placeholder:"Enter name",backgroundDark:"backgroundDark"})}),Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"profession",component:fe,placeholder:"Enter profession",backgroundDark:"backgroundDark"})}),Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"extraDetails",component:We,placeholder:"Enter extraDetails",backgroundDark:"backgroundDark"})}),Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"skills",placeholder:"Enter skills",component:We,backgroundDark:"backgroundDark"})}),Object(ce.jsx)(Se,{children:Object(ce.jsx)(ue.a,{name:"details",placeholder:"Enter details",component:We,backgroundDark:"backgroundDark"})}),Object(ce.jsx)(ge,{styled:!0,width:"fit-content",type:"submit",children:"Submit"})]})}})})})},Bt=z.c.tr(At||(At=Object(ee.a)(["\n  img {\n    width: 100px;\n    height: 100px;\n  }\n"]))),Ft=z.c.table(qt||(qt=Object(ee.a)(["\n  background-color: ",";\n  border-radius: 20px;\n  padding: 10px;\n  display: inline-block;\n  margin: 0 0 10px 10px;\n  text-align: left;\n  max-width: 500px;\n  word-break: break-all;\n  line-height: 25px;\n"])),(function(e){return e.theme.post})),Ht=z.c.div(Nt||(Nt=Object(ee.a)(["\n  h1 {\n    text-align: center;\n  }\n  p {\n    line-height: 30px;\n  }\n"]))),Gt=z.c.div(zt||(zt=Object(ee.a)(["\n  background-color: ",";\n  max-width: 500px;\n  padding: 20px;\n  border-radius: 10px;\n  margin: 50px auto;\n  form {\n    margin-bottom: 10px;\n  }\n"])),(function(e){return e.theme.post})),Vt=z.c.div(Ut||(Ut=Object(ee.a)(["\n  text-align: end;\n  margin-top: 10px;\n"])));var Jt=function(){var e=Object(r.useState)(!1),t=Object(_e.a)(e,2),n=t[0],c=t[1],o=Object(a.b)(),i=Object(a.c)((function(e){return e.auth})),s=i.id,d=i.name,l=i.email,j=i.dateCreated,b=i.details,u=i.extra_details,h=i.profession,m=i.skills,x=i.avatar,p=Object(r.useRef)();return Object(r.useEffect)((function(){o(Y())}),[o]),Object(ce.jsx)(at,{children:Object(ce.jsxs)(Gt,{children:[Object(ce.jsx)(Ht,{children:Object(ce.jsx)(Ft,{children:Object(ce.jsxs)("tbody",{children:[x&&Object(ce.jsx)(Bt,{children:Object(ce.jsx)("td",{children:Object(ce.jsx)("img",{src:"".concat("http://51.158.179.21").concat(x),alt:"img"})})}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Username:"}),Object(ce.jsx)("td",{children:d})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"UserId:"}),Object(ce.jsx)("td",{children:s})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Email:"}),Object(ce.jsx)("td",{children:l})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Details:"}),Object(ce.jsx)("td",{children:b})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Extra:"}),Object(ce.jsx)("td",{children:u})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Profession:"}),Object(ce.jsx)("td",{children:h})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Skills:"}),Object(ce.jsx)("td",{children:m})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Created:"}),Object(ce.jsx)("td",{children:j})]})]})})}),Object(ce.jsxs)(Vt,{children:[Object(ce.jsx)(ge,{type:"button",width:"50px",onClick:function(){return c(!n)},children:"Edit"}),Object(ce.jsx)(ge,{type:"button",width:"50px",onClick:function(){Tt(s).then((function(){o($())}))},children:"Delete"})]}),n?Object(ce.jsxs)("div",{children:[Object(ce.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Rt(s,p.current.files[0]).then((function(){o(Y())}))},children:[Object(ce.jsx)("input",{type:"file",ref:p}),Object(ce.jsx)(ge,{width:"fit-content",type:"submit",children:"Submit"})]}),Object(ce.jsx)(Mt,{})]}):null]})})};var Kt,Xt=function(){var e=Object(r.useState)([]),t=Object(_e.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(_e.a)(o,2),a=i[0],s=i[1],d=Object(r.useState)(""),l=Object(_e.a)(d,2),j=l[0],b=l[1];Object(r.useEffect)((function(){Lt().then((function(e){c(e.data.data)}))}),[]);var u=Object(r.useMemo)((function(){return n.sort((function(e,t){return e[j]>t[j]?-1:e[j]<t[j]?1:0})).filter((function(e){return e.name?e.name.toLowerCase().includes(a.toLowerCase()):null}))}),[n,j,a]);return Object(ce.jsxs)(ot,{children:[Object(ce.jsx)(st,{children:Object(ce.jsxs)(lt,{children:[Object(ce.jsx)(pe,{type:"text",value:a,placeholder:"Search",onChange:function(e){return s(e.target.value)}}),Object(ce.jsxs)("select",{onChange:function(e){return b(e.target.value)},children:[Object(ce.jsx)("option",{value:"",hidden:!0,children:"Sort by"}),Object(ce.jsx)("option",{value:"name",children:"username"}),Object(ce.jsx)("option",{value:"dateCreated",children:"dateCreated"})]})]})}),Object(ce.jsx)("div",{children:u.map((function(e){return Object(ce.jsx)(Ft,{children:Object(ce.jsxs)("tbody",{children:[e.avatar&&Object(ce.jsx)(Bt,{children:Object(ce.jsx)("td",{children:Object(ce.jsx)("img",{src:"".concat("http://51.158.179.21").concat(e.avatar),alt:"img"})})}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Username:"}),Object(ce.jsx)("td",{children:e.name})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"UserId:"}),Object(ce.jsx)("td",{children:e._id})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Email:"}),Object(ce.jsx)("td",{children:e.email})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Details:"}),Object(ce.jsx)("td",{children:e.details})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Extra:"}),Object(ce.jsx)("td",{children:e.extra_details})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Profesion:"}),Object(ce.jsx)("td",{children:e.profession})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Skills:"}),Object(ce.jsx)("td",{children:e.skills})]}),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("th",{children:"Created:"}),Object(ce.jsx)("td",{children:e.dateCreated})]})]})},e._id)}))})]})},Wt=["component"],Zt=function(e){var t=e.component,n=Object(me.a)(e,Wt);return Object(ce.jsx)(N.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return n="token",localStorage.getItem(n)?Object(ce.jsx)(t,Object(b.a)({},e)):Object(ce.jsx)(N.a,{to:{pathname:"/login",state:{from:e.location}}});var n}}))},Qt=Object(z.b)(Kt||(Kt=Object(ee.a)(['\n@import url("https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap");\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  font-family: "Open Sans", sans-serif;\n  color: ',";\n  background-color: ",";\n}\n\nul {\n  list-style-type: none;\n}\n\na {\n  text-decoration: none;\n  color: ",";\n  font-weight: 600;\n}\n\na:hover {\n  color: none;\n}\n\ntextarea,\ninput {\n  background-color: "," !important;\n}\n\ntextarea:focus,\ninput:focus {\n  outline: 1px solid rebeccapurple;\n}\nselect,\noption {\n  background-color: ",";\n  outline: none;\n  border: none;\n  color: ",";\n}\n.Toastify__toast-icon {\n  width: 12px !important;\n}\n\n.Toastify__toast {\n  width: 109px !important;\n  min-height: 28px !important;\n  background-color: "," !important;\n  font-size: 15px !important;\n  padding: 0 !important;\n  color: ",' !important;\n}\n.Toastify__toast-container--bottom-right {\n  bottom: 0em !important; \n  right: -12em !important;\n}\ntd {\n  padding-left: 20px;\n}\n.password {\n  padding: 10px;\n  background-color: #0d1117;\n  border: none;\n  border-radius: 20px;\n  width: 100%;\n  color: #c9d1d9;\n}\n\n.toggle-button {\n position: relative;\n display: inline-block;\n width: 37px;\n height: 18px;\n margin: 10px 0 0 10px;\n vertical-align: top;\n background-color: #161b22;\n border: none;\n border-radius: 30px;\n outline: none;\n cursor: pointer;\n appearance: none;\n}\n\n.toggle-button::after {\n  content: "";\n\n  display: inline-block;\n  position: absolute;\n\n  width: 18px;\n  height: 18px;\n  background-color: blue;\n  border-radius: 50%;\n\n  transform: translateX(0);\n}\n.toggle-button:checked::after {\n  transform: translateX(calc(100% + 4px));\n  background-color: gray;  \n}\n.toggle-button:checked {\n  background-color: #161b22;\n}\n'])),(function(e){return e.theme.fontColor}),(function(e){return e.theme.body}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.input}),(function(e){return e.theme.body}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.post}),(function(e){return e.theme.fontColor})),Yt={header:"blue",body:"#c9d1d9",fontColor:"#000",post:"#A7B0CA",comment:"#A7B0CA",input:"#fff"},$t={header:"#161b22",body:"#0d1117",fontColor:"#c9d1d9",post:"#161b22",comment:"#161b22",input:""};var en=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.theme})).theme;return Object(ce.jsxs)(z.a,{theme:"Light"===t?Yt:$t,children:[Object(ce.jsx)(Qt,{}),Object(ce.jsxs)(q.a,{children:[Object(ce.jsx)(be,{}),Object(ce.jsx)("div",{children:Object(ce.jsx)("input",{onClick:function(){e("Light"===t?{type:v}:{type:k})},type:"checkbox",id:"toggle-button",className:"toggle-button"})}),Object(ce.jsxs)(N.d,{children:[Object(ce.jsx)(N.b,{exact:!0,path:"/",component:bt}),Object(ce.jsx)(N.b,{path:"/register",component:Re}),Object(ce.jsx)(N.b,{path:"/login",component:Ce}),Object(ce.jsx)(N.b,{path:"/posts/:post_id",component:It}),Object(ce.jsx)(Zt,{exact:!0,path:"/profile",component:Jt}),Object(ce.jsx)(Zt,{exact:!0,path:"/users-list",component:Xt})]})]})]})};i.a.render(Object(ce.jsx)(a.a,{store:A,children:Object(ce.jsxs)(c.a.StrictMode,{children:[Object(ce.jsx)(s.a,{}),Object(ce.jsx)(en,{})]})}),document.getElementById("root"))}},[[233,1,2]]]);
//# sourceMappingURL=main.0737dae5.chunk.js.map